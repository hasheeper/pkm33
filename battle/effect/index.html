<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PKM Layout Base</title>
    <!-- 引入基础样式 -->
    <link rel="stylesheet" href="./base.css">
</head>
<body>

    <!-- 1. 全局缩放容器：保证 UI 在任何屏幕上比例不变 -->
    <div class="ui-root">
        <div class="ui-scale">
            
            <!-- 2. 战斗舞台：层级基准点 -->
            <div class="battle-stage">

                <!-- [UI占位] 敌方信息 HUD -->
                <div class="hud panel-enemy-pos">
                    <!-- 这个框是给 HP 条留的，现在只画轮廓 -->
                    <div class="debug-box">[Enemy HUD]</div>
                </div>

                <!-- [UI占位] 我方信息 HUD -->
                <div class="hud panel-player-pos">
                     <div class="debug-box">[Player HUD + HP]</div>
                </div>

                <!-- 核心：敌方精灵层 (Z-Index: 2) -->
                <!-- 使用 Pokemon Black/White 风格的正面 3D 动图 -->
                <div class="sprite-wrapper enemy-pos">
                    <img class="p-sprite" src="https://play.pokemonshowdown.com/sprites/ani/garchomp.gif" alt="Enemy">
                    <div class="shadow-base"></div> <!-- 脚底阴影 -->
                </div>

                <!-- 核心：我方精灵层 (Z-Index: 5) -- 离镜头更近 -->
                <!-- 使用 Pokemon Black/White 风格的背面 3D 动图 -->
                <div class="sprite-wrapper player-pos">
                    <img class="p-sprite player-scale" src="https://play.pokemonshowdown.com/sprites/ani-back/charizard.gif" alt="Player">
                    <div class="shadow-base"></div> <!-- 脚底阴影 -->
                </div>

                <!-- [UI占位] 底部操作面板 -->
                <div class="dashboard-area">
                    <div class="debug-box short">[Log]</div>
                    <div class="debug-box long">[Menu Area (Fight/Bag...)]</div>
                </div>
            </div>
            
        </div>
    </div>

    <!-- ================== 开发者调试浮窗 ================== -->
    <div id="debug-layer" class="debug-container">
        <div class="debug-header" onclick="toggleDebug()">
            🛠️ 战斗调试器 <span id="debug-toggle-icon">▼</span>
        </div>

        <!-- 攻守方切换 -->
        <div class="debug-section">
            <div class="lbl">WHO IS ATTACKING? (发起者)</div>
            <div class="turn-switch-group">
                <button id="btn-turn-player" class="d-btn turn-btn active" onclick="setTurn('player')">
                    😎 我方进攻
                    <small>Player -> Enemy</small>
                </button>
                <button id="btn-turn-enemy" class="d-btn turn-btn" onclick="setTurn('enemy')">
                    👹 敌方进攻
                    <small>Enemy -> Player</small>
                </button>
            </div>
        </div>

        <hr class="d-hr">

        <!-- 1. 属性选择器 (全局生效) -->
        <div class="debug-section">
            <div class="lbl">设定技能/特效属性</div>
            <div class="type-grid" id="type-selector">
                <button class="d-btn type-btn active" data-type="normal" onclick="setType('normal')"></button>
                <button class="d-btn type-btn" data-type="fire" onclick="setType('fire')"></button>
                <button class="d-btn type-btn" data-type="water" onclick="setType('water')"></button>
                <button class="d-btn type-btn" data-type="grass" onclick="setType('grass')"></button>
                <button class="d-btn type-btn" data-type="electric" onclick="setType('electric')"></button>
                <button class="d-btn type-btn" data-type="ice" onclick="setType('ice')"></button>
                <button class="d-btn type-btn" data-type="fighting" onclick="setType('fighting')"></button>
                <button class="d-btn type-btn" data-type="poison" onclick="setType('poison')"></button>
                <button class="d-btn type-btn" data-type="ground" onclick="setType('ground')"></button>
                <button class="d-btn type-btn" data-type="flying" onclick="setType('flying')"></button>
                <button class="d-btn type-btn" data-type="psychic" onclick="setType('psychic')"></button>
                <button class="d-btn type-btn" data-type="bug" onclick="setType('bug')"></button>
                <button class="d-btn type-btn" data-type="rock" onclick="setType('rock')"></button>
                <button class="d-btn type-btn" data-type="ghost" onclick="setType('ghost')"></button>
                <button class="d-btn type-btn" data-type="dragon" onclick="setType('dragon')"></button>
                <button class="d-btn type-btn" data-type="dark" onclick="setType('dark')"></button>
                <button class="d-btn type-btn" data-type="steel" onclick="setType('steel')"></button>
                <button class="d-btn type-btn" data-type="fairy" onclick="setType('fairy')"></button>
            </div>
            <div class="debug-status-text">当前属性色彩: <span id="cur-type-text" style="color:#aaa;">normal</span></div>
        </div>

        <hr class="d-hr">

        <!-- 结果修正配置 -->
        <div class="debug-section">
            <div class="lbl">RESULT OVERRIDE (结果指定)</div>
            <div class="eff-group">
                <button class="d-btn eff-btn e-weak" onclick="setEffectiveness('weak')">
                    Result: 📉 微弱
                    <small>x0.5 Resist</small>
                </button>
                <button class="d-btn eff-btn e-inv active" onclick="setEffectiveness('normal')">
                    Result: ⚪ 一般
                    <small>x1.0 Normal</small>
                </button>
                <button class="d-btn eff-btn e-super" onclick="setEffectiveness('super')">
                    Result: 💥 绝佳
                    <small>x2.0 Super</small>
                </button>
            </div>

            <div style="margin-top:8px;">
                <button id="btn-crit-toggle" class="d-btn crit-btn" onclick="toggleCrit()">
                    🎯 击中要害 (Critical Hit): <span id="crit-status">OFF</span>
                </button>
            </div>
        </div>

        <hr class="d-hr">

        <!-- 2. 攻击动作调试 -->
        <div class="debug-section">
            <div class="lbl">动作触发 (发起者: 我方)</div>
            <div class="btn-group">
                <button class="d-btn action-main" onclick="debugAction('CONTACT')">
                    👊 接触类 (Dash)
                    <small>冲撞/爪击/牙</small>
                </button>
                <button class="d-btn action-main" onclick="debugAction('RANGED')">
                    非接触 (Cast)
                    <small>光束/泡/叶片/波</small>
                </button>
            </div>

            <div class="btn-group" style="margin-top:6px;">
                <button class="d-btn" onclick="debugAction('MISS')"> 未命中 (Miss)</button>
            </div>

        </div>

        <hr class="d-hr">

        <!-- 3. Buff/Debuff/状态与回血 -->
        <div class="debug-section">
            <div class="lbl">状态变动与反馈</div>
            <div class="btn-grid-3">
                <button class="d-btn stat-up" onclick="debugEffect('BUFF')">💪 BUFF↑</button>
                <button class="d-btn stat-down" onclick="debugEffect('DEBUFF')">😫 DEBUFF↓</button>
                <button class="d-btn stat-heal" onclick="debugEffect('HEAL')">💊 回血</button>
            </div>

            <div class="lbl" style="margin-top:8px;">异常状态 (On Hit)</div>
            <div class="btn-grid-4">
                <button class="d-btn status-btn status-brn" onclick="debugStatus('BRN')">
                    <img src="https://cdn.jsdelivr.net/gh/duiker101/pokemon-type-svg-icons/icons/fire.svg" alt="Burn">
                    <span>烧伤</span>
                </button>
                <button class="d-btn status-btn status-frz" onclick="debugStatus('FRZ')">
                    <img src="https://cdn.jsdelivr.net/gh/duiker101/pokemon-type-svg-icons/icons/ice.svg" alt="Freeze">
                    <span>冰冻</span>
                </button>
                <button class="d-btn status-btn status-par" onclick="debugStatus('PAR')">
                    <img src="https://cdn.jsdelivr.net/gh/duiker101/pokemon-type-svg-icons/icons/electric.svg" alt="Paralysis">
                    <span>麻痹</span>
                </button>
                <button class="d-btn status-btn status-psn" onclick="debugStatus('PSN')">
                    <img src="https://cdn.jsdelivr.net/gh/duiker101/pokemon-type-svg-icons/icons/poison.svg" alt="Poison">
                    <span>中毒</span>
                </button>
            </div>
        </div>
    </div>

    <script src="./debug-console.js"></script>

</body>
</html>