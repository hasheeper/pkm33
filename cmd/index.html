<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commander System V2 - Layered</title>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,700;0,800;0,900;1,900&family=M+PLUS+Rounded+1c:wght@500;800;900&family=Zhi+Mang+Xing&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="theme-update.css">
</head>
<body>
    <!-- Hidden defs for global gradients -->
    <svg style="position: absolute; width: 0; height: 0; overflow: hidden;" aria-hidden="true">
        <defs>
            <linearGradient id="mega-rainbow" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#ff9cd6" />
                <stop offset="25%" style="stop-color:#ffeb3b" />
                <stop offset="50%" style="stop-color:#5affda" />
                <stop offset="75%" style="stop-color:#4bcffa" />
                <stop offset="100%" style="stop-color:#d49bfd" />
            </linearGradient>
        </defs>
    </svg>

    <div class="commander-stage">
        <div class="stage-backdrop"></div>

        <!-- SMART INTEL BUBBLE -->
        <div id="smart-bubble" class="smart-bubble-wrapper" onclick="toggleCommanderRoot()">
            <div class="bubble-glow-ring"></div>
            <div class="bubble-core">
                <div class="bubble-icon-stage" id="bubble-icon-stage"></div>
            </div>
            <div class="bubble-label-pill" id="bubble-text">LINK</div>
            <svg class="bubble-progress" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="46" stroke-width="4" stroke="rgba(255,255,255,0.1)" fill="none"></circle>
                <circle id="bubble-timer-circle" cx="50" cy="50" r="46" stroke-width="4" stroke="currentColor" fill="none" stroke-dasharray="289" stroke-dashoffset="0"></circle>
            </svg>
        </div>

        <div id="commander-overlay" class="cmd-layer hidden">
            <div class="commander-container">
                <div class="commander-wheel" id="cmd-wheel">
                    <button class="cmd-btn pos-top" id="slot-top" onclick="handleQuadrant('top')">
                        <svg class="icon-bg" viewBox="0 0 100 100"></svg>
                        <div class="cmd-content">
                            <span class="cmd-label">---</span>
                            <span class="cmd-sub">---</span>
                        </div>
                    </button>

                    <button class="cmd-btn pos-right" id="slot-right" onclick="handleQuadrant('right')">
                        <svg class="icon-bg" viewBox="0 0 100 100"></svg>
                        <div class="cmd-content">
                            <span class="cmd-label">---</span>
                            <span class="cmd-sub">---</span>
                        </div>
                    </button>

                    <button class="cmd-btn pos-bottom" id="slot-bottom" onclick="handleQuadrant('bottom')">
                        <svg class="icon-bg" viewBox="0 0 100 100"></svg>
                        <div class="cmd-content">
                            <span class="cmd-label">---</span>
                            <span class="cmd-sub">---</span>
                        </div>
                    </button>

                    <button class="cmd-btn pos-left" id="slot-left" onclick="handleQuadrant('left')">
                        <svg class="icon-bg" viewBox="0 0 100 100"></svg>
                        <div class="cmd-content">
                            <span class="cmd-label">---</span>
                            <span class="cmd-sub">---</span>
                        </div>
                    </button>

                    <div class="cmd-hub">
                        <div class="pulse-ring"></div>
                    </div>
                </div>

                <div class="cmd-cancel-hint" onclick="handleCloseOrBack()">
                    <span class="key" id="cancel-key-text">X</span>
                    <span id="cancel-text">关闭指令</span>
                </div>
            </div>
        </div>
    </div>

    <script src="mechanics.js"></script>
</body>
</html>